<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"[
<!ENTITY % myents SYSTEM "release-notes.ent" >
%myents;
]>


<section id="TechInfo.IPv6">
 <title>IPv6 Implementation and Compliance</title>

 <para>CHECKIT:SLE11.3</para>
 <para>
  &sles; 11 is compliant to IPv6 Logo Phase 2. However, when running the
  respective tests, you may see some tests failing.  For various
  reasons, we cannot enable all the configuration options by default,
  which are necessary to pass all the tests. For details, see below.
 </para>
    
 <itemizedlist>
  <listitem>
   <para>
    Section 3: RFC 4862 - IPv6 Stateless Address Autoconfiguration
   </para>
   <para>
    Some tests fail because of the default DAD handling in Linux;
    disabling the complete interface is possible, but not the default
    behavior (because security-wise, this might open a DoS attack
    vector, a malicious node on a network could shutdown the complete
    segment) this is still conforming to RFC 4862: the shutdown of the
    interface is a "should", not a mandatory ("must") rule.
   </para>
   <para>
    The Linux kernel allows you to change the default behavior with a
    sysctl parameter.  To do this on &sles; 11, you need to make the
    following changes in configuration:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Add ipv6 to the modules load early on boot
     </para>
     <para>
      Edit <filename>/etc/sysconfig/kernel</filename> and add ipv6 to
      MODULES_LOADED_ON_BOOT
      e.g. <option>MODULES_LOADED_ON_BOOT="ipv6"</option>. This is needed
      for the second change to work, if ipv6 is not loaded early enough,
      setting the sysctl fails.
     </para>
    </listitem>
    <listitem>
     <para>Add the following lines to <filename>/etc/sysctl.conf</filename>
     </para>

      <screen>## shutdown IPV6 on MAC based duplicate address detection
net.ipv6.conf.default.accept_dad = 2
net.ipv6.conf.all.accept_dad = 2
net.ipv6.conf.eth0.accept_dad = 2
net.ipv6.conf.eth1.accept_dad = 2
      </screen>

      <para>
      Note: if you use other interfaces (e.g., eth2), modify the
      lines. With these changes, all tests for RFC 4862 should
      pass.</para>
    </listitem>
   </itemizedlist>
  </listitem>
        
  <listitem>
   <para>Section 4: RFC 1981 - Path MTU Discovery for IPv6	</para>
   <itemizedlist>
    <listitem>
     <para>
      Test v6LC.4.1.10: Multicast Destination - One Router
     </para>
    </listitem>
    <listitem>
     <para>
      Test v6LC.4.1.11: Multicast Destination - Two Routers
     </para>
    </listitem>
   </itemizedlist>

   <para>On these two tests ping6 needs to be told to allow
   defragmentation of multicast packets. Newer ping6 versions have this
   disabled by default. Use: <command>ping6 -M want &lt;other
   parameters&gt;</command>. See <command>man ping6</command> for more
   information.
   </para>
  </listitem>

  <!-- bnc#484093 -->
  <listitem>
   <para>Enable IPv6 in YaST for SCTP Support</para>
   <para>SCTP is dependent on IPv6, so in order to successfully insert
   the SCTP module, IPv6 must be enabled in YaST. This allows for the
   IPv6 module to be automatically inserted when <command>modprobe
   sctp</command> is called.</para>
  </listitem>

 </itemizedlist>

</section>
